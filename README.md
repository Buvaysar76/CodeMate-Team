# Balance Service (Laravel + PostgreSQL + Docker)

–°–µ—Ä–≤–∏—Å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–ª–∞–Ω—Å–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ HTTP JSON API.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (POST /api/deposit)
- –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ (POST /api/withdraw)
- –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (POST /api/transfer)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (GET /api/balance/{user_id})

–ë–∞–ª–∞–Ω—Å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º. –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö.

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- PHP 8.2+
- Laravel
- PostgreSQL
- Docker, Docker Compose
- Swagger UI (/api/docs)
- PHPUnit (Feature tests)

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Docker)

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ.

2. –ü–æ–¥–Ω–∏–º–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
docker-compose up -d --build
```

3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏/—Å–∏–¥–µ—Ä—ã:

```bash
docker-compose exec app php artisan key:generate
docker-compose exec app php artisan migrate --seed
```

4. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:8080
```

API –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ `http://localhost:8080/api`.

---

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### POST /api/deposit
```json
{
  "user_id": 1,
  "amount": 500.00,
  "comment": "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–∞—Ä—Ç—É"
}
```
–ö–æ–¥—ã: 200, 422

---

### POST /api/withdraw
```json
{
  "user_id": 1,
  "amount": 200.00,
  "comment": "–ü–æ–∫—É–ø–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏"
}
```
–ö–æ–¥—ã: 200, 409, 422

---

### POST /api/transfer
```json
{
  "from_user_id": 1,
  "to_user_id": 2,
  "amount": 150.00,
  "comment": "–ü–µ—Ä–µ–≤–æ–¥ –¥—Ä—É–≥—É"
}
```
–ö–æ–¥—ã: 200, 409, 404, 422

---

### GET /api/balance/{user_id}
```json
{
  "user_id": 1,
  "balance": 350.00
}
```
–ö–æ–¥—ã: 200, 404

---

## Swagger UI

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
```
http://localhost:8080/api/docs
```

---

## –¢–µ—Å—Ç—ã

```bash
docker-compose exec app php artisan test
```

–ü—Ä–æ–µ–∫—Ç –ø–æ–∫—Ä—ã—Ç feature-—Ç–µ—Å—Ç–∞–º–∏: –¥–µ–ø–æ–∑–∏—Ç, —Å–Ω—è—Ç–∏–µ, –ø–µ—Ä–µ–≤–æ–¥, –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞, –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏.

---

## Seeder'—ã

```bash
docker-compose exec app php artisan db:seed
```

–°–æ–∑–¥–∞—é—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã ‚úîÔ∏è

- Docker ‚úÖ
- PostgreSQL ‚úÖ
- —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚úÖ
- –≤–∞–ª–∏–¥–∞—Ü–∏–∏ ‚úÖ
- 4 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ ‚úÖ
- —Ç–µ—Å—Ç—ã ‚úÖ
- Swagger ‚úÖ
- —Å–∏–¥–µ—Ä—ã ‚úÖ

–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ üöÄ

